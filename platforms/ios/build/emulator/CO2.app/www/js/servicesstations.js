/*!
 * Copyright 2014 Giuseppe Zileni
 * http://giuseppezileni.github.io
 *
 * Ionic, v1.0.0
 * http://ionicframework.com/
 *
 * By @gzileni
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

//////////////////////////////////////////////
// 
// airQ App - Service ARPA Stations
//
//

var service = angular.module('airq.servicesstations', []);

service.factory('Stations', function (_, $moment, $http, async, S, Geolocation) {

	var stations_data = [
    {
        "prov": "BA",
        "citta": "Altamura",
        "ente": "Provincia di BARI",
        "centralina": "Altamura",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "631558",
        "UTMN": "4520820",
        "UTMZONE": "33",
        "lat": "40.8253487",
        "lng": "16.5447983"
    },
    {
        "prov": "BA",
        "citta": "Molfetta",
        "ente": "RRQA",
        "centralina": "ASM",
        "centralina2": "ASM",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "630969",
        "UTMN": "4562731",
        "UTMZONE": "33",
        "lat": "41.1983539",
        "lng": "16.5982243"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "RRQA",
        "centralina": "Caldarola",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "658520",
        "UTMN": "4553079",
        "UTMZONE": "33",
        "lat": "41.1072436",
        "lng": "16.8973116"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "Carbonara",
        "centralina2": "Carbonara",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.0741635",
        "lng": "16.8675493"
    },
    {
        "prov": "BA",
        "citta": "Casamassima",
        "ente": "Provincia di BARI",
        "centralina": "Casamassima",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "661589",
        "UTMN": "4535223",
        "UTMZONE": "33",
        "lat": "40.9563751",
        "lng": "16.9214699"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "CAVOUR",
        "centralina2": "CAVOUR",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "657197",
        "UTMN": "4554020",
        "UTMZONE": "33",
        "lat": "41.1215689",
        "lng": "16.8724812"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "CUS",
        "centralina2": "CUS",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "654878",
        "UTMN": "4555354",
        "UTMZONE": "33",
        "lat": "41.136724",
        "lng": "16.845783"
    },
    {
        "prov": "BA",
        "citta": "Modugno",
        "ente": "RRQA",
        "centralina": "ENAIP",
        "centralina2": "ENAIP",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "648497",
        "UTMN": "4552500",
        "UTMZONE": "33",
        "lat": "41.0944372",
        "lng": "16.780525"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "Japigia",
        "centralina2": "Japigia",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "657821",
        "UTMN": "4551943",
        "UTMZONE": "33",
        "lat": "41.116413",
        "lng": "16.889954"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "Kennedy",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "656105",
        "UTMN": "4551478",
        "UTMZONE": "33",
        "lat": "41.119702",
        "lng": "16.865338"
    },
    {
        "prov": "BA",
        "citta": "Monopoli",
        "ente": "Provincia di BARI",
        "centralina": "Monopoli",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "692701",
        "UTMN": "4535752",
        "UTMZONE": "33",
        "lat": "40.9500755",
        "lng": "17.2980943"
    },
    {
        "prov": "BA",
        "citta": "Monopoli",
        "ente": "Provincia di BARI",
        "centralina": "Monopoli ItalGreen",
        "centralina2": "Monopoli ItalGreen",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "692229",
        "UTMN": "4537004",
        "UTMZONE": "33",
        "lat": "40.95114",
        "lng": "17.287912"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "Politecnico",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "656634",
        "UTMN": "4551531",
        "UTMZONE": "33",
        "lat": "41.1090147",
        "lng": "16.8786627"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "Comune di BARI",
        "centralina": "Stanic",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "656212",
        "UTMN": "4552323",
        "UTMZONE": "33",
        "lat": "41.128046",
        "lng": "16.798926"
    },
    {
        "prov": "BA",
        "citta": "Molfetta",
        "ente": "RRQA",
        "centralina": "Verdi",
        "centralina2": "P.zza Verdi",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "634595",
        "UTMN": "4562323",
        "UTMZONE": "33",
        "lat": "41.2001567",
        "lng": "16.605415"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ARPA",
        "centralina": "Casale",
        "centralina2": "Brindisi – Casale",
        "zona": "Urbana",
        "tipo": "Fondo",
        "UTME": "748879",
        "UTMN": "4504259",
        "UTMZONE": "33",
        "lat": "40.661646",
        "lng": "17.9397792"
    },
    {
        "prov": "BR",
        "citta": "Ceglie Messapica",
        "ente": "ENEL",
        "centralina": "Ceglie Messapica",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "712432",
        "UTMN": "4502847",
        "UTMZONE": "33",
        "lat": "40.6474046",
        "lng": "17.5143376"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "Provincia di BRINDISI",
        "centralina": "IT Nautico Carnaro",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "747611",
        "UTMN": "4503443",
        "UTMZONE": "33",
        "lat": "40.64841",
        "lng": "17.939184"
    },
    {
        "prov": "BR",
        "citta": "Torchiarolo",
        "ente": "ENEL",
        "centralina": "Lendinuso",
        "centralina2": "Lendinuso",
        "zona": "Rurale",
        "tipo": "Industriale",
        "UTME": "760838",
        "UTMN": "4489753",
        "UTMZONE": "33",
        "lat": "40.4829381",
        "lng": "18.0515271"
    },
    {
        "prov": "BR",
        "citta": "Mesagne",
        "ente": "RRQA",
        "centralina": "Mesagne",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "737714",
        "UTMN": "4494370",
        "UTMZONE": "33",
        "lat": "40.5577883",
        "lng": "17.8054194"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ENIPOWER",
        "centralina": "Perrino",
        "centralina2": "Brindisi – Perrino",
        "zona": "Urbana",
        "tipo": "Fondo",
        "UTME": "749892",
        "UTMN": "4502036",
        "UTMZONE": "33",
        "lat": "40.63824",
        "lng": "17.94578"
    },
    {
        "prov": "BR",
        "citta": "San Pancrazio Salentino",
        "ente": "RRQA",
        "centralina": "San Pancrazio Salentino",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "741444",
        "UTMN": "4478597",
        "UTMZONE": "33",
        "lat": "40.4177814",
        "lng": "17.8319421"
    },
    {
        "prov": "BR",
        "citta": "San Pietro Vernotico",
        "ente": "RRQA",
        "centralina": "San Pietro Vernotico",
        "centralina2": "San Pietro Vernotico",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "754781",
        "UTMN": "4486042",
        "UTMZONE": "33",
        "lat": "40.4898487",
        "lng": "17.9988286"
    },
    {
        "prov": "BR",
        "citta": "San Vito dei Normanni",
        "ente": "Provincia di BRINDISI",
        "centralina": "San Vito dei Normanni",
        "centralina2": "",
        "zona": "Fondo",
        "tipo": "Traffico",
        "UTME": "729316",
        "UTMN": "4504244",
        "UTMZONE": "33",
        "lat": "40.65659",
        "lng": "17.7084174"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ARPA",
        "centralina": "SISRI",
        "centralina2": "Brindisi – SISRI",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "751700",
        "UTMN": "4501449",
        "UTMZONE": "33",
        "lat": "40.631943",
        "lng": "17.952039"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ENEL/EDIPOWER",
        "centralina": "Terminal Passeggeri",
        "centralina2": "Brindisi - Terminal Passeggeri",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "750422",
        "UTMN": "4503838",
        "UTMZONE": "33",
        "lat": "40.63957",
        "lng": "17.947935"
    },
    {
        "prov": "BR",
        "citta": "Torchiarolo",
        "ente": "RRQA",
        "centralina": "Torchiarolo",
        "centralina2": "Torchiarolo-Don Minzoni",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "758842",
        "UTMN": "4486404",
        "UTMZONE": "33",
        "lat": "40.4829381",
        "lng": "18.0515271"
    },
    {
        "prov": "BR",
        "citta": "Torchiarolo",
        "ente": "ENEL",
        "centralina": "Torchiarolo-Via Fanin",
        "centralina2": "Torchiarolo-Via Fanin SN",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "758263",
        "UTMN": "4486545",
        "UTMZONE": "33",
        "lat": "40.488037",
        "lng": "18.0538096"
    },
    {
        "prov": "BR",
        "citta": "San Pietro Vernotico",
        "ente": "Provincia di BRINDISI",
        "centralina": "Valzani",
        "centralina2": "S. Pietro Vernotico - Valzani",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "754296",
        "UTMN": "4485359",
        "UTMZONE": "33",
        "lat": "40.48096",
        "lng": "18.00084"
    },
    {
        "prov": "BR",
        "citta": "Mesagne",
        "ente": "RRQA",
        "centralina": "Via Antonucci",
        "centralina2": "Mesagne-Via Antonucci",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.5511964",
        "lng": "17.8132887"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ENIPOWER",
        "centralina": "Via Cappuccini",
        "centralina2": "Brindisi - Cappuccini",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "747098",
        "UTMN": "4501881",
        "UTMZONE": "33",
        "lat": "40.63957",
        "lng": "17.947935"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "ARPA",
        "centralina": "Via dei Mille",
        "centralina2": "Brindisi - Via dei Mille",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "748464",
        "UTMN": "4502808",
        "UTMZONE": "33",
        "lat": "40.6395517",
        "lng": "17.9386622"
    },
    {
        "prov": "BR",
        "citta": "Francavilla Fontana",
        "ente": "Provincia di BRINDISI",
        "centralina": "Via Fabio Filzi",
        "centralina2": "Francavilla Fontana - Via F. Filzi",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "719236",
        "UTMN": "4489711",
        "UTMZONE": "33",
        "lat": "40.5294276",
        "lng": "17.5886095"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "RRQA",
        "centralina": "Via Taranto",
        "centralina2": "Brindisi -Via Taranto?",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "749277",
        "UTMN": "4503418",
        "UTMZONE": "33",
        "lat": "40.6334747",
        "lng": "17.9449844"
    },
    {
        "prov": "BT",
        "citta": "Barletta",
        "ente": "Provincia di Bari",
        "centralina": "Via Casardi",
        "centralina2": "Barletta - Stadio",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "607646",
        "UTMN": "4574709",
        "UTMZONE": "33",
        "lat": "41.3175155",
        "lng": "16.2858552"
    },
    {
        "prov": "BT",
        "citta": "Andria",
        "ente": "Provincia di Bari",
        "centralina": "Via Vaccina",
        "centralina2": "Andria",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "609209",
        "UTMN": "4565364",
        "UTMZONE": "33",
        "lat": "41.231376",
        "lng": "16.3034349"
    },
    {
        "prov": "FG",
        "citta": "Manfredonia",
        "ente": "RRQA",
        "centralina": "Capitaneria di Porto",
        "centralina2": "Manfredonia - Cap. di porto",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "575991",
        "UTMN": "4608679",
        "UTMZONE": "33",
        "lat": "41.6287305",
        "lng": "15.9232827"
    },
    {
        "prov": "FG",
        "citta": "Foggia",
        "ente": "RRQA",
        "centralina": "Rosati",
        "centralina2": "Foggia",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "545819",
        "UTMN": "4589475",
        "UTMZONE": "33",
        "lat": "41.4585629",
        "lng": "15.5507588"
    },
    {
        "prov": "FG",
        "citta": "Monte Sant Angelo",
        "ente": "RRQA",
        "centralina": "Monte S. Angelo",
        "centralina2": "Monte S. Angelo - Suolo Ciuffreda",
        "zona": "Rurale",
        "tipo": "Fondo",
        "UTME": "578692",
        "UTMN": "4613137",
        "UTMZONE": "33",
        "lat": "41.707352",
        "lng": "15.954281"
    },
    {
        "prov": "FG",
        "citta": "Manfredonia",
        "ente": "RRQA",
        "centralina": "via dei Mandorli",
        "centralina2": "Manfredonia - Mandorli",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "575770",
        "UTMN": "4609022",
        "UTMZONE": "33",
        "lat": "41.6256245",
        "lng": "15.9048405"
    },
    {
        "prov": "LE",
        "citta": "Arnesano",
        "ente": "RRQA",
        "centralina": "Arnesano Riesci",
        "centralina2": "Arnesano",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "762876",
        "UTMN": "4470790",
        "UTMZONE": "33",
        "lat": "40.3365134",
        "lng": "18.0914567"
    },
    {
        "prov": "LE",
        "citta": "Campi Salentina",
        "ente": "Provincia di LECCE",
        "centralina": " Campi Salentina",
        "centralina2": " Campi S.na - I.T.C. Costa ",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "756857",
        "UTMN": "4476277",
        "UTMZONE": "33",
        "lat": "40.3992757",
        "lng": "18.0237324"
    },
    {
        "prov": "LE",
        "citta": "Surbo",
        "ente": "RRQA",
        "centralina": "Giorgiloro",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "766796",
        "UTMN": "4475426",
        "UTMZONE": "33",
        "lat": "40.3864241",
        "lng": "18.1495752"
    },
    {
        "prov": "LE",
        "citta": "Guagnano",
        "ente": "RRQA",
        "centralina": "Guagnano",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "751513",
        "UTMN": "4478431",
        "UTMZONE": "33",
        "lat": "40.4005338",
        "lng": "17.948502"
    },
    {
        "prov": "LE",
        "citta": "Maglie",
        "ente": "Provincia di LECCE",
        "centralina": "ITC De Castro",
        "centralina2": "Maglie - I.T.C. De Castro",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "780702",
        "UTMN": "4446683",
        "UTMZONE": "33",
        "lat": "40.1229689",
        "lng": "18.2997631"
    },
    {
        "prov": "LE",
        "citta": "Galatina",
        "ente": "Provincia di LECCE",
        "centralina": "ITC La Porta",
        "centralina2": "Galatina - I.T.C.  La Porta ",
        "zona": "Suburbana",
        "tipo": "Fondo/Industriale",
        "UTME": "770356",
        "UTMN": "4451121",
        "UTMZONE": "33",
        "lat": "40.1715662",
        "lng": "18.1688186"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "Comune di Lecce",
        "centralina": "P.zza Libertini",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "769785",
        "UTMN": "4471666",
        "UTMZONE": "33",
        "lat": "40.3537903",
        "lng": "18.1762034"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "Provincia di LECCE",
        "centralina": "Piazza Palio",
        "centralina2": "Lecce - P.za Palio",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "771253",
        "UTMN": "4472743",
        "UTMZONE": "33",
        "lat": "40.3615164",
        "lng": "18.1937003"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "RRQA",
        "centralina": "S. Maria Cerrate",
        "centralina2": "Lecce - S. Maria Cerrate",
        "zona": "Rurale",
        "tipo": "Fondo",
        "UTME": "764242",
        "UTMN": "4483446",
        "UTMZONE": "33",
        "lat": "40.458776",
        "lng": "18.115587"
    },
    {
        "prov": "LE",
        "citta": "Galatina",
        "ente": "RRQA",
        "centralina": "Santa Barbara",
        "centralina2": "Galatina - S. Barbara",
        "zona": "Suburbana",
        "tipo": "Traffico",
        "UTME": "761767",
        "UTMN": "4457503",
        "UTMZONE": "33",
        "lat": "40.223989",
        "lng": "18.0783994"
    },
    {
        "prov": "LE",
        "citta": "Surbo",
        "ente": "ENEL",
        "centralina": "Via B. Croce",
        "centralina2": "Surbo- Via B. Croce SN",
        "zona": "Rurale",
        "tipo": "Industriale",
        "UTME": "764807",
        "UTMN": "4478158",
        "UTMZONE": "33",
        "lat": "40.3989589",
        "lng": "18.1285583"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "Comune di Lecce",
        "centralina": "Via Garigliano",
        "centralina2": "Lecce - Garigliano",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "769536",
        "UTMN": "4473048",
        "UTMZONE": "33",
        "lat": "40.363398",
        "lng": "18.1731329"
    },
    {
        "prov": "TA",
        "citta": "Grottaglie",
        "ente": "Provincia di TARANTO",
        "centralina": "Grottaglie",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Fondo",
        "UTME": "705279",
        "UTMN": "4490271",
        "UTMZONE": "33",
        "lat": "40.5379781",
        "lng": "17.440118"
    },
    {
        "prov": "TA",
        "citta": "Martina Franca",
        "ente": "Provincia di TARANTO",
        "centralina": "Martina Franca",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "697012",
        "UTMN": "4508162",
        "UTMZONE": "33",
        "lat": "40.6994361",
        "lng": "17.3363823"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "ARPA",
        "centralina": "Paolo VI - CISI",
        "centralina2": "Paolo VI",
        "zona": "Rurale",
        "tipo": "Industriale",
        "UTME": "687616",
        "UTMN": "4487932",
        "UTMZONE": "33",
        "lat": "40.5226013",
        "lng": "17.2731356"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "RRQA",
        "centralina": "San Vito",
        "centralina2": "",
        "zona": "Suburbana",
        "tipo": "Traffico/industriale",
        "UTME": "688778",
        "UTMN": "4477122",
        "UTMZONE": "33",
        "lat": "",
        "lng": ""
    },
    {
        "prov": "TA",
        "citta": "Statte",
        "ente": "ARPA",
        "centralina": "SS7 Ponte Wind",
        "centralina2": "ss.7 Wind",
        "zona": "Rurale",
        "tipo": "Traffico/industriale",
        "UTME": "684114",
        "UTMN": "4488423",
        "UTMZONE": "33",
        "lat": "40.4180155",
        "lng": "17.215219"
    },
    {
        "prov": "TA",
        "citta": "Statte",
        "ente": "RRQA",
        "centralina": "Statte",
        "centralina2": "Statte",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "686530",
        "UTMN": "4492525",
        "UTMZONE": "33",
        "lat": "40.559978",
        "lng": "17.2157458"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "ARPA",
        "centralina": "Talsano",
        "centralina2": "Talsano",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "693783",
        "UTMN": "4475985",
        "UTMZONE": "33",
        "lat": "40.4014103",
        "lng": "17.2919891"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "RRQA",
        "centralina": "Via Alto Adige",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico",
        "UTME": "691924",
        "UTMN": "4481337",
        "UTMZONE": "33",
        "lat": "40.4610271",
        "lng": "17.2643093"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "RRQA",
        "centralina": "Via Archimede",
        "centralina2": "Via Archimede",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "689238",
        "UTMN": "4485033",
        "UTMZONE": "33",
        "lat": "40.4939156",
        "lng": "17.2316801"
    },
    {
        "prov": "TA",
        "citta": "Massafra",
        "ente": "Provincia di TARANTO",
        "centralina": "Via Frappietri",
        "centralina2": "",
        "zona": "Urbana",
        "tipo": "Traffico/industriale",
        "UTME": "679111",
        "UTMN": "4495815",
        "UTMZONE": "33",
        "lat": "40.5938291",
        "lng": "17.1168983"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "RRQA",
        "centralina": "Via Machiavelli",
        "centralina2": "Via Machiavelli",
        "zona": "Suburbana",
        "tipo": "Industriale",
        "UTME": "688642",
        "UTMN": "4484370",
        "UTMZONE": "33",
        "lat": "40.4870401",
        "lng": "17.2217089"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "",
        "centralina": "Bozzano",
        "centralina2": "Brindisi - Bozzano",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.6291524",
        "lng": "17.9441206"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Carcere",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.4585785",
        "lng": "17.278766"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "",
        "centralina": "Ciapi",
        "centralina2": "CIAPI",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.1229408",
        "lng": "16.820035"
    },
    {
        "prov": "BA",
        "citta": "Bari",
        "ente": "",
        "centralina": "KENNEDY",
        "centralina2": "KENNEDY",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.1010288",
        "lng": "16.860768"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "",
        "centralina": "Costa Morena Diga",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.6422302",
        "lng": "17.9359548"
    },
    {
        "prov": "BR",
        "citta": "Brindisi",
        "ente": "",
        "centralina": "Costa Morena EST",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.6422302",
        "lng": "17.9359548"
    },
    {
        "prov": "BA",
        "citta": "Modugno",
        "ente": "",
        "centralina": "Via Magna Grecia",
        "centralina2": "Via Magna Grecia",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.0897903",
        "lng": "16.7771626"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Manduria",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.4005834",
        "lng": "17.6295221"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "",
        "centralina": "San Pietro In Lama",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.3063303",
        "lng": "18.1280333"
    },
    {
        "prov": "BAT",
        "citta": "Barletta ",
        "ente": "",
        "centralina": "Via Canosa",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.3114191",
        "lng": "16.2630433"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "",
        "centralina": "Viale Romagna",
        "centralina2": "",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.3405493",
        "lng": "18.1822566"
    },
    {
        "prov": "BA",
        "citta": "Bitonto",
        "ente": "",
        "centralina": "EN01",
        "centralina2": "EN01",
        "zona": "",
        "tipo": "",
        "UTME": "646607.91",
        "UTMN": "4549012.8",
        "UTMZONE": "33",
        "lat": "41.1088388",
        "lng": "16.6906897"
    },
    {
        "prov": "BA",
        "citta": "Modugno",
        "ente": "",
        "centralina": "Assessorato",
        "centralina2": "EN02 - Assessorato",
        "zona": "",
        "tipo": "",
        "UTME": "648305",
        "UTMN": "4555516",
        "UTMZONE": "33",
        "lat": "41.0944372",
        "lng": "16.780525"
    },
    {
        "prov": "BA",
        "citta": "Modugno",
        "ente": "",
        "centralina": "Vigili Urbani",
        "centralina2": "EN03 - Vigili Urbani",
        "zona": "",
        "tipo": "",
        "UTME": "649647",
        "UTMN": "4549969",
        "UTMZONE": "33",
        "lat": "41.0944372",
        "lng": "16.780525"
    },
    {
        "prov": "BA",
        "citta": "Modugno",
        "ente": "",
        "centralina": "SAN PAOLO",
        "centralina2": "EN04 - SAN PAOLO",
        "zona": "",
        "tipo": "",
        "UTME": "650120",
        "UTMN": "4553064",
        "UTMZONE": "33",
        "lat": "41.0944372",
        "lng": "16.780525"
    },
    {
        "prov": "BA",
        "citta": "Palo del Colle",
        "ente": "",
        "centralina": "EN05?",
        "centralina2": "EN05?",
        "zona": "",
        "tipo": "",
        "UTME": "642913",
        "UTMN": "4546965",
        "UTMZONE": "33",
        "lat": "",
        "lng": ""
    },
    {
        "prov": "BR",
        "citta": "Cisternino",
        "ente": "",
        "centralina": "Cisternino",
        "centralina2": "Cisternino",
        "zona": "",
        "tipo": "",
        "UTME": "703972",
        "UTMN": "4513011",
        "UTMZONE": "33",
        "lat": "40.743194",
        "lng": "17.4261229"
    },
    {
        "prov": "BT",
        "citta": "Barletta",
        "ente": "",
        "centralina": "Mezzo Mobile - Via del mare",
        "centralina2": "Mezzo Mobile - Via del mare",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.111738",
        "lng": "16.694734"
    },
    {
        "prov": "FG",
        "citta": "Candela",
        "ente": "",
        "centralina": "Candela",
        "centralina2": "Candela",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.1366132",
        "lng": "15.5152695"
    },
    {
        "prov": "FG",
        "citta": "Candela",
        "ente": "",
        "centralina": "EX COMES",
        "centralina2": "EX COMES",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.1346456",
        "lng": "15.5151944"
    },
    {
        "prov": "FG",
        "citta": "Manfredonia",
        "ente": "",
        "centralina": "Manfredonia - Ungaretti",
        "centralina2": "Manfredonia - Ungaretti",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.627484",
        "lng": "15.9065273"
    },
    {
        "prov": "FG",
        "citta": "Manfredonia",
        "ente": "",
        "centralina": "Via Michelangelo",
        "centralina2": "Via Michelangelo",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "41.6183755",
        "lng": "15.8980867"
    },
    {
        "prov": "FG",
        "citta": "San Severo",
        "ente": "",
        "centralina": "Azienda Russo",
        "centralina2": "Azienda Russo",
        "zona": "",
        "tipo": "",
        "UTME": "536767",
        "UTMN": "4599538",
        "UTMZONE": "33",
        "lat": "41.302266",
        "lng": "16.068267"
    },
    {
        "prov": "FG",
        "citta": "San Severo",
        "ente": "",
        "centralina": "Posta del Principe",
        "centralina2": "Posta del Principe",
        "zona": "",
        "tipo": "",
        "UTME": "532294",
        "UTMN": "4609076",
        "UTMZONE": "33",
        "lat": "41.632761",
        "lng": "15.38771954"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "cokeria",
        "centralina2": "cokeria",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Direzione",
        "centralina2": "Direzione",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Meteo Parchi",
        "centralina2": "Meteo Parchi",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Portineria C",
        "centralina2": "Portineria C",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Riv1",
        "centralina2": "Riv1",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Tamburi",
        "centralina2": "Tamburi",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.50013",
        "lng": "17.1977"
    },
    {
        "prov": "LE",
        "citta": "Lecce",
        "ente": "",
        "centralina": "De Santis",
        "centralina2": "De Santis",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.3541307",
        "lng": "18.1742945"
    },
    {
        "prov": "TA",
        "citta": "Manduria",
        "ente": "",
        "centralina": "Manduria",
        "centralina2": "Manduria",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.4005834",
        "lng": "17.6295221"
    },
    {
        "prov": "TA",
        "citta": "Taranto",
        "ente": "",
        "centralina": "Casa Circondariale",
        "centralina2": "Casa Circondariale",
        "zona": "",
        "tipo": "",
        "UTME": "",
        "UTMN": "",
        "UTMZONE": "33",
        "lat": "40.4585785",
        "lng": "17.278766"
    }];

    var data;

	var stations_json = {

		data: function () {
			return stations_data;
		},

		get: function (input, callback_root) {

			data = input;

            console.log('get stations ...');

			async.each(data, function (item, callback) {

				var centralina = item.station;
			    var city = item.city;
			    var location = item.state;

                // console.log('check: ' + centralina + ',' + city + ',' + location);

			    var station = _.find(stations_data, function (item) {
			        return (S(item.citta).contains(city)) && 
			      	       (S(item.centralina).contains(centralina) ||
			      	        S(item.centralina2).contains(centralina));
			    });

			    if (typeof station !== 'undefined') {

                    // console.log('founded station...');

			    	var UTM_E = parseFloat(station.UTME);
			      	var UTM_N = parseFloat(station.UTMN);
			      	var zoneUTM = parseInt(station.UTMZONE);

			      	var lat = parseFloat(station.lat);
			      	var lng = parseFloat(station.lng);

			      	if (isNaN(lat) || isNaN(lng) ) {
				        var coordinate = Geolocation.ToLL(UTM_N, UTM_E, zoneUTM);
				        item.location.latitude = coordinate.lat;
				        item.location.longitude = coordinate.lon;
				    } else {
				        item.location.latitude = lat;
				        item.location.longitude = lng;
				    };
			    };

			    callback();

			}, function (err) {
                console.log('done stations ... Err:' + err);
				callback_root(err, data);
			})
		}
	};

	return stations_json;

});

